{"version":3,"file":"SearchView-3a5f1e71.js","sources":["../../src/stores/searching.js","../../src/components/Search/Search.vue"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport axios from \"axios\";\r\nimport { baseUrl, lang, headers } from \"../static\";\r\n\r\nexport const useSearch = defineStore(\"searching\", {\r\n  state: () => ({\r\n    searchArray: null,\r\n    search: \"\",\r\n    adult: false,\r\n    total_results: 0,\r\n  }),\r\n  actions: {\r\n    async getSearch(page = 1) {\r\n      if (this.search != \"\") {\r\n        try {\r\n          const res = await axios({\r\n            method: \"GET\",\r\n            url: `${baseUrl}/search/multi?query=${this.search}&include_adult=${this.adult}&language=${lang}&page=${page}`,\r\n            headers: headers,\r\n          });\r\n\r\n          this.searchArray = res.data.results;\r\n          this.total_results = res.data.total_results;\r\n        } catch (error) {\r\n          console.error(\"Error in Searching store\", error);\r\n        }\r\n      } else {\r\n        this.searchArray = null;\r\n      }\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <section class=\"search\">\r\n    <div class=\"container\">\r\n      <input\r\n        type=\"text\"\r\n        class=\"search__input\"\r\n        :placeholder=\"placeholder\"\r\n        v-model=\"searching\"\r\n      />\r\n      <div class=\"content__list\">\r\n        <ContentItem\r\n          v-for=\"content in searchArray\"\r\n          :key=\"content.id\"\r\n          :content=\"content\"\r\n          :type=\"content.media_type\"\r\n        />\r\n      </div>\r\n      <div class=\"search__paginate\" v-if=\"searchArray\">\r\n        <vue-awesome-paginate\r\n          :total-items=\"total_results\"\r\n          :items-per-page=\"20\"\r\n          :max-pages-shown=\"3\"\r\n          v-model=\"page\"\r\n          :on-click=\"nextPage\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { useSearch } from \"@/stores/searching\";\r\nimport { computed, ref } from \"vue\";\r\nimport ContentItem from \"@/components/UI/ContentItem.vue\";\r\n\r\nconst searchStore = useSearch();\r\nconst props = defineProps([\"placeholder\"]);\r\nlet page = ref(1);\r\nconst searching = computed({\r\n  get: () => {\r\n    return searchStore.search;\r\n  },\r\n  set: (value) => {\r\n    searchStore.search = value;\r\n    searchStore.getSearch(page.value);\r\n  },\r\n});\r\nconst nextPage = () => {\r\n  page.value + 1;\r\n  searchStore.getSearch(page.value);\r\n};\r\n\r\nconst searchArray = computed(() => searchStore.searchArray);\r\nconst total_results = computed(() => searchStore.total_results);\r\n</script>\r\n"],"names":["useSearch","defineStore","page","res","axios","baseUrl","lang","headers","error","searchStore","ref","searching","computed","value","nextPage","searchArray","total_results"],"mappings":"2NAIO,MAAMA,EAAYC,EAAY,YAAa,CAChD,MAAO,KAAO,CACZ,YAAa,KACb,OAAQ,GACR,MAAO,GACP,cAAe,CACnB,GACE,QAAS,CACP,MAAM,UAAUC,EAAO,EAAG,CACxB,GAAI,KAAK,QAAU,GACjB,GAAI,CACF,MAAMC,EAAM,MAAMC,EAAM,CACtB,OAAQ,MACR,IAAK,GAAGC,wBAA8B,KAAK,wBAAwB,KAAK,kBAAkBC,UAAaJ,IACvG,QAASK,CACrB,CAAW,EAED,KAAK,YAAcJ,EAAI,KAAK,QAC5B,KAAK,cAAgBA,EAAI,KAAK,aAC/B,OAAQK,EAAP,CACA,QAAQ,MAAM,2BAA4BA,CAAK,CAChD,MAED,KAAK,YAAc,IAEtB,CACF,CACH,CAAC,4KCID,MAAMC,EAAcT,EAAS,EAE7B,IAAIE,EAAOQ,EAAI,CAAC,EAChB,MAAMC,EAAYC,EAAS,CACzB,IAAK,IACIH,EAAY,OAErB,IAAMI,GAAU,CACdJ,EAAY,OAASI,EACrBJ,EAAY,UAAUP,EAAK,KAAK,CACjC,CACH,CAAC,EACKY,EAAW,IAAM,CACrBZ,EAAK,MAAQ,EACbO,EAAY,UAAUP,EAAK,KAAK,CAClC,EAEMa,EAAcH,EAAS,IAAMH,EAAY,WAAW,EACpDO,EAAgBJ,EAAS,IAAMH,EAAY,aAAa"}